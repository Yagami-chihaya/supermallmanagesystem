{"version":3,"sources":["webpack:///./src/views/Home/childComponents/Goods/Category.vue","webpack:///./src/views/Home/childComponents/Goods/Category.vue?d81a","webpack:///./src/views/Home/childComponents/Goods/Category.vue?13b2"],"names":["class","separator-class","to","type","openAddCartgoryBox","data","categoriesData","tree-props","border","lazy","row-key","style","prop","label","align","width","scope","row","cat_deleted","cat_level","plain","icon","handleSizeChange","handleCurrentChange","current-page","queryInfo","pagenum","page-sizes","page-size","pagesize","layout","total","title","isAddCategoryVisible","addCategoryClosed","footer","confirm","model","addCategoriesForm","rules","ref","label-width","cat_name","clearable","selectedKeys","options","parentCategory","props","cascaderProps","handleChange","el","required","message","trigger","cat_pid","value","children","expandTrigger","checkStrictly","methods","getCategoriesData","request","get","params","this","then","res","console","log","meta","status","$message","error","msg","result","success","newSize","newPage","getParentCategory","$refs","ruleForm","validate","valid","post","length","resetFields","created","render","__scopeId"],"mappings":"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","file":"js/chunk-523e4af7.afdf5d5e.js","sourcesContent":["<template>\r\n  <div>\r\n     <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品分类</el-breadcrumb-item>\r\n      \r\n    </el-breadcrumb>\r\n\r\n    <el-card>\r\n      <el-button type=\"primary\" class=\"addCartgory\" @click=\"openAddCartgoryBox\">添加分类</el-button>\r\n      <el-table\r\n        :data=\"categoriesData\"\r\n        :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\r\n        border\r\n        lazy\r\n        row-key=\"cat_id\"\r\n        \r\n        style=\"width: 100%\">\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column\r\n          prop=\"cat_name\"\r\n          label=\"商品名称\"\r\n          >\r\n        </el-table-column>\r\n        <el-table-column align=\"center\"\r\n          prop=\"cat_deleted\"\r\n          label=\"是否有效\"\r\n          width=\"100\">\r\n          <template v-slot:='scope'>\r\n          <i class=\"el-icon-success\" v-if=\"!scope.row.cat_deleted\"></i>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          \r\n          width=\"200px\"\r\n          label=\"排序\"\r\n          align=\"center\"\r\n          >\r\n          <template v-slot:='scope'>\r\n            <el-button v-if=\"scope.row.cat_level==0\" type=\"primary\" plain>一级权限</el-button>\r\n            <el-button v-if=\"scope.row.cat_level==1\" type=\"success\" plain>二级权限</el-button>\r\n            <el-button v-if=\"scope.row.cat_level==2\" type=\"warning\" plain>三级权限</el-button>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300px\" align=\"center\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\">编辑</el-button>\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\">删除</el-button>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <el-dialog\r\n      title=\"提示\"\r\n      v-model=\"isAddCategoryVisible\"\r\n      width=\"50%\"\r\n\r\n      @close=\"addCategoryClosed\"\r\n      >\r\n      <el-form :model=\"addCategoriesForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item label=\"分类名称\" prop=\"cat_name\">\r\n          <el-input v-model=\"addCategoriesForm.cat_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"父类分级\">\r\n          <el-cascader\r\n            clearable\r\n            \r\n            v-model=\"selectedKeys\"\r\n            :options=\"parentCategory\"\r\n            :props=\"cascaderProps\"\r\n            @change=\"handleChange\"></el-cascader>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"isAddCategoryVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {request} from '../../../../network/request'\r\n\r\n\r\nexport default {\r\n  el: '',\r\n  data () {\r\n    return {\r\n      \r\n      queryInfo:{\r\n        type:3,\r\n        pagenum:1,\r\n        pagesize:5,\r\n      },\r\n      \r\n      categoriesData:[],\r\n      total:0,\r\n      isAddCategoryVisible:false,\r\n      rules:{\r\n        cat_name:[\r\n          {required:true,message:'请输入分级名称',trigger:'blur'}\r\n        ]\r\n      },\r\n      addCategoriesForm:{\r\n        cat_name:'',\r\n        cat_pid:0,\r\n        \r\n        cat_level:0,\r\n      },\r\n      parentCategory:[],\r\n      cascaderProps:{\r\n        value:'cat_id',\r\n        label:'cat_name',\r\n        children:'children',\r\n        expandTrigger:'hover',\r\n        checkStrictly:true\r\n      },\r\n      selectedKeys:[],\r\n    }\r\n  },\r\n  methods: {\r\n    getCategoriesData(){\r\n      request().get('categories',{params:this.queryInfo}).then(res=>{\r\n        console.log(res);\r\n        if(res.data.meta.status!=200){\r\n          return this.$message.error(res.data.meta.msg)\r\n        }\r\n        this.categoriesData = res.data.data.result\r\n        \r\n        this.total = res.data.data.total\r\n        this.$message.success(res.data.meta.msg)\r\n      })\r\n    },\r\n    handleSizeChange(newSize){\r\n      this.queryInfo.pagesize = newSize\r\n      this.getCategoriesData()\r\n    },\r\n    handleCurrentChange(newPage){\r\n      this.queryInfo.pagenum = newPage\r\n      this.getCategoriesData()\r\n    },\r\n    openAddCartgoryBox(){\r\n      this.getParentCategory()\r\n      this.isAddCategoryVisible = true\r\n    },\r\n    confirm(){  \r\n      console.log(this.addCategoriesForm);\r\n      this.$refs.ruleForm.validate(valid=>{\r\n        if(!valid) return\r\n        request().post('categories',this.addCategoriesForm).then(res=>{\r\n          console.log(res);\r\n          if(res.data.meta.status!=201){\r\n            return this.$message.error(res.data.meta.msg)\r\n          }\r\n          this.getCategoriesData()\r\n          this.$message.success(res.data.meta.msg)\r\n          \r\n        })\r\n        this.isAddCategoryVisible = false\r\n      })\r\n      \r\n    },\r\n    getParentCategory(){\r\n      request().get('categories',{params:{type:2}}).then(res=>{\r\n        console.log(res);\r\n        if(res.data.meta.status!=200){\r\n          return this.$message.error(res.data.meta.msg)\r\n        }\r\n        this.parentCategory = res.data.data\r\n      })\r\n    },\r\n    handleChange(){\r\n      console.log(this.selectedKeys);\r\n      if(!this.selectedKeys){\r\n        this.addCategoriesForm.cat_level = 0\r\n        this.addCategoriesForm.cat_pid = 0\r\n      }else{\r\n      this.addCategoriesForm.cat_level = this.selectedKeys.length\r\n      this.addCategoriesForm.cat_pid = this.selectedKeys[this.selectedKeys.length-1]\r\n      }\r\n    },\r\n    addCategoryClosed(){\r\n      this.$refs.ruleForm.resetFields()\r\n      this.selectedKeys = []\r\n      this.addCategoriesForm.cat_level = 0\r\n      this.addCategoriesForm.cat_pid = 0\r\n    }\r\n  },\r\n  created(){\r\n    this.getCategoriesData()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .addCartgory{\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n</style>\r\n","import { render } from \"./Category.vue?vue&type=template&id=5bdc0004&scoped=true\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\n\nimport \"./Category.vue?vue&type=style&index=0&id=5bdc0004&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5bdc0004\"\n\nexport default script","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Category.vue?vue&type=style&index=0&id=5bdc0004&scoped=true&lang=css\""],"sourceRoot":""}